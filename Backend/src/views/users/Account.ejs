<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head', { pageTitle: title }) %>
  </head>
  <body>
    <%- include('../partials/header', { headerClass: 'header-black' }) %>
    <main>
      <section class="my-account container mt-5">
        <h1 class="title-users">Mi Cuenta</h1>
        <h2 class="title-greeting">
          ¡Bienvenido, <%= user.first_name %> <%= user.last_name %>!
        </h2>

        <form
          action="/users/updateProfile"
          method="POST"
          enctype="multipart/form-data"
          class="row g-3 mt-4"
        >
          <div class="profile-picture">
            <img
              src="<%= user.url || '/images/defaultPorfile.png' %>"
              alt="Profile Picture"
              id="circular-image"
            />

            <input
              type="file"
              id="upload-photo"
              name="profileImage"
              style="display: none"
            />
            <label for="upload-photo" class="edit-icon">
              <i class="bx bx-pencil"></i> Cambiar Foto
            </label>
            <input
              type="hidden"
              name="oldProfileImage"
              value="<%= user.profileImage ? user.profileImage.url : '' %>"
            />
          </div>
          
          <div class="col-md-6">
            <label for="inputFirstName" class="form-label">Nombre</label>
            <input
              type="text"
              id="inputFirstName"
              name="firstName"
              value="<%= user.first_name %>"
            />
          </div>

          <div class="col-md-6">
            <label for="inputLastName" class="form-label">Apellido</label>
            <input
              type="text"
              id="inputLastName"
              name="lastName"
              value="<%= user.last_name %>"
            />
          </div>

          <div class="col-md-6">
            <label for="inputEmail" class="form-label"
              >Correo Electrónico</label
            >
            <input
              type="email"
              id="inputEmail"
              name="email"
              value="<%= user.email %>"
            />
          </div>

          <div class="col-md-6">
            <label for="inputPhone" class="form-label">Teléfono</label>
            <input
              type="text"
              id="inputPhone"
              name="phone"
              value="<%= user.phone %>"
            />
          </div>

          <div class="col-md-20">
            <label for="inputType" class="form-label">Tipo de Usuario</label>
            <input
              type="text"
              id="inputType"
              name="type"
              value="<%= user.type %>"
              readonly
            />
          </div>

          <div class="btn-group-profile">
            <button type="submit" class="btn-submit">Guardar Cambios</button>
            <a href="/" class="btn-submit" id="btn-redirect">volver</a>
          </div>
        </form>
      </section>
    </main>

    <%- include('../partials/footer') %>

    <script src="/javascripts/userAccount.js"></script>
    <script src="/javascripts/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
  </body>
</html>
